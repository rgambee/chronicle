{% extends "tracker/base.html" %}

{% block title %}Entries{% endblock %}

{% block content %}

<h2>New Entry</h2>
<form method="post">
  {% csrf_token %}
  {{ form }}
  <button type="submit">Save</button>
</form>

<h2>Existing Entries</h2>
<table>
  <tr>
    <th>Date</th>
    <th>Amount</th>
    <th>Category</th>
    <th>Tags</th>
    <th>Comment</th>
    <th>Edit</th>
    <th>Delete</th>
  </tr>
  {% for entry in entries %}
    <tr>
      <td>{{ entry.date|date }}</td>
      <td>{{ entry.amount|floatformat:"-2" }}</td>
      <td>
        <a href="{% url 'entries-in-category' entry.category %}">
          {{ entry.category }}
        </a>
      </td>
      <td>{{ entry.tags.all|join:", "|default:"None"|truncatechars:25 }}</td>
      <td>{{ entry.comment|default:"None"|truncatechars:25}}
      <td><a href="{% url 'edit' entry.id %}">Edit</a></td>
      <td><a href="{% url 'delete' entry.id %}">Delete</a></td>
    </tr>
  {% endfor %}
</table>

<div class="pagination">
  <span class="step-links">
    {% if paginator.num_pages > 1 %}
      {% if page_obj.has_previous %}
        <a href="?page=1">&laquo; first</a>
        <a href="?page={{ page_obj.previous_page_number }}">previous</a>
      {% endif %}

      <span class="current">
        Page {{ page_obj.number }} of {{ paginator.num_pages }}
      </span>

      {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">next</a>
        <a href="?page=last">last &raquo;</a>
      {% endif %}
    {% endif %}
  </span>
</div>

{% endblock %}
